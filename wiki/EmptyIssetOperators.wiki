#summary Shortcut operators to common operations with isset() and empty()
<wiki:toc/>

== Introduction ===
A common pattern in PHP is checking if a variable or the return of a function is set or is empty and then performing assignments or changing the control flow. The postfix operators `??` and `?!` provides shortcuts for this. `??` and `?!` resembles `isset()` and `!empty()` respectively.

Notice that if you use `??` or `?!` _flow control_ on function calls the Snow compiler will introduce a magic variable named `$status` because `isset()` and `empty()` only works on variables.


== Matrix ==
<table border="1" cellpadding="5">
    <tr>
        <td><strong>Snow</strong></td>
        <td><strong>PHP</strong></td>
    </tr>
    <tr>
        <td><strong>Assignment</strong></td>
        <td></td>
    </tr>
    <tr>
        <td>
{{{
a = b ?? 42
}}}
        </td>
        <td>
{{{
$a = isset($b) ? $b : 42;
}}}
        </td>
    </tr>
    <tr>
        <td>
{{{
a = b ?! 42
}}}
        </td>
        <td>
{{{
$a = !empty($b) ? $b : 42;
}}}
        </td>
    </tr>
    <tr>
        <td>
{{{
a = get_stuff('foo') ?? 42
}}}
        </td>
        <td>
{{{
$a = get_stuff('foo');
if (!isset($a)) {
    $a = 42;
}
}}}
        </td>
    </tr>
    <tr>
<td>
{{{
a = get_stuff('foo') ?! 42
}}}
        </td>
        <td>
{{{
$a = get_stuff('foo');
if (empty($a)) {
    $a = 42;
}
}}}
        </td>
    </tr>
    <tr>
        <td><strong>Flow control</strong></td>
        <td></td>
    </tr>
    <tr>
<td>
{{{
b ?! throw InvalidArgumentException
}}}
        </td>
        <td>
{{{
if (empty($b)) {
    throw new InvalidArgumentException;
}
}}}
        </td>
    </tr>
    <tr>
<td>
{{{
authors['fans'] ??
    for fan in get_fans()
        authors['fans'] |= '<ul>' % "<li>{fan}</li>" % '</ul>'
}}}
        </td>
        <td>
{{{
if (!isset($authors['fans'])) {
    $authors['fans'] = '<ul>';
    foreach (get_fans() as $fan) {
        $authors['fans'] .= "<li>$fan</li>";
    }
    $authors['fans'] .= '</ul>';
}
}}}        
        </td>
    </tr>
    <tr>
<td>
{{{
get_stuff('foo') ?! throw MyException
}}}
        </td>
        <td>
{{{
$status = get_stuff('foo');
if (empty($status)) {
    throw new MyException;
}
}}}
        </td>
    </tr>
</table>